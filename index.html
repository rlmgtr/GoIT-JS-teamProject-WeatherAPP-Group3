<!DOCTYPE html>  
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weather App</title>
<link rel="stylesheet" type="text/css" href="./src/Css/styleskaren.css">
</head>
<body>

<div class="container">
    <div>
        <div class="search">
            <button><img src="images/search.png"></button>
            <input type="text" placeholder="Enter city name" spellcheck="false" class="input-city">
        </div>
    </div>

    <!-- <div class="search-box">
        <form id="searchForm" class="city-search">
            <input type="text" id="cityInput" placeholder="Enter city name" class="input-city">
            <div class="search-buttons">
                <button type="submit" value="Search" class="five-day-btn btn" data-start>5 DAYS</button>
                <button type="submit" value="Search" class="today-btn btn" data-stop>TODAY</button>
                <button id="favoriteBtn" class="btn">Favorite</button>
            </div>
        </form>
    </div> -->

    <div class="current-date">
        <div class="current-date-info">
            <div id="currentdate" class="current-date-day"></div>
            <div class="current-date-time"></div>
        </div>
    </div>

    <div class="weather">
        <div class="weather-info">
            <img src="images/rain.png" class="weather-icon">
            <h2 class="city">New York</h2>
            <h1 class="temp">22</h1>
            <div class="details">
                <div class="col">
                    <p class="min-max">min</p>
                    <p class="min-temp">25째</p>
                </div>
                <div class="col">
                    <p class="min-max">max</p>
                    <p class="max-temp">35째</p>
                </div>
            </div>
        </div>
    </div>
    <!-- <div class="search-button">
        <button type="submit" value="Search" class="five-day-btn btn">5 DAYS</button>
        <button type="submit" value="Search" class="today-btn btn">TODAY</button>
    </div> -->

    

    <div id="forecast" class="forecast"></div>
    <div id="weatherInfo" class="weather-info"></div>
</div>


<button id="showGraphBtn">Show Graph</button>
<canvas id="weatherChart" width="100" height="50" style="display:none;"></canvas>


<script>
    const apiKey = "31328a08c8eed36865b9c197e848a2e0";
    const apiUrl = "https://api.openweathermap.org/data/2.5/weather?&units=metric&q=";

    const searchBox = document.querySelector(".search input");
    const searchBtn = document.querySelector(".search button");
    const weatherIcon = document.querySelector(".weather-icon")

    async function checkWeather(city){
        const response = await fetch(apiUrl + city + `&appid=${apiKey}`);
        var data =await response.json();

        console.log(data);

        document.querySelector(".city").innerHTML = data.name;
        document.querySelector(".temp").innerHTML = Math.round(data.main.temp);
        document.querySelector(".min-temp").innerHTML = Math.round(data.main.temp_min) + "째";
        document.querySelector(".max-temp").innerHTML = Math.round(data.main.temp_max)  + "째";

        if(data.weather[0].main == "Clouds"){
            weatherIcon.src = "images/clouds.png"
        }
        else if(data.weather[0].main == "Clear"){
            weatherIcon.src = "images/clear.png"
        }
        else if(data.weather[0].main == "Rain"){
            weatherIcon.src = "images/rain.png"
        }
        else if(data.weather[0].main == "Drizzle"){
            weatherIcon.src = "images/drizzle.png"
        }
        else if(data.weather[0].main == "Mist"){
            weatherIcon.src = "images/mist.png"
        }
    }

    searchBtn.addEventListener("click", () => {
        checkWeather(searchBox.value);
    })

    // checkWeather();
    
</script>
<script src="./src/JS/fiveDays.js"></script>
<script src="./src/JS/today.js"></script>
<script src="./src/JS/favorite.js"></script>
<script src="./src/JS/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
